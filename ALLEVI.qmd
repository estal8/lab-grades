---
title: "ALLEVI"
author: "Esther Allevi"
format: html
---

Here is the link to the github repository : https://github.com/estal8/lab-grades.git

## Introduction

### Study organisation

```{r}
#|message : false
library(here)
library(vroom)
library(dplyr)
library(tidyr)
library(readr)
library(ggplot2)
```


#### Question 1

```{r}
here::i_am("lab-grades.Rproj")
```

```{r}
courses <- vroom("courses.csv")
```

#### Question 2 

```{r}
courses |>
  rename(`course name` = course, "identifier" = course_id, `number of exams`= "nb_grades") |>
  knitr::kable()
```

### Students

#### Question 3

```{r}
students <- vroom("students.csv")
```

```{r}
# Checking the types
cols_type = cols(
  id = col_double(),
  group = col_double(),
  birth_date = col_date(format = ""),
  sex = col_character(),
  .delim = ","
)
```

```{r}
students <- students |>
  mutate(
    id = as.integer(id),
    group = as.factor(group),
    sex = as.factor(sex)
  )
```

```{r}
typeof(students$group) # checking
class(students$birth_date)
```

The `{r} "birth_date"` column of the `{r} "students"` data frame is of class `{r} class(students$birth_date)`.

**PROBLÃˆME RENDERING**

### Grades

```{r}
# Check, not sure if properly cleaned
grades_clean <- read_delim(here("grades.csv"),
  delim = ";",
  na = "$")
```

## Student population analysis

#### Question 5

```{r}
students |>
  summarise(`Number of students per group` = n(), .by = group) |>
  ggplot(aes(x = group, y = `Number of students per group`)) + 
    geom_col() 
```

#### Question 6

```{r}
students |>
    summarise(`Number of students per group` = n(), .by = c(group, sex)) |>
  ggplot(aes(x = group, y = `Number of students per group`, fill = sex)) + 
    geom_col() 
```

#### Question 7

```{r}
students |>
  mutate(age = as.numeric(Sys.Date() - birth_date) / 365) |>
  ggplot(aes(x = age)) +
    geom_density(bw = "sj") +
    geom_rug(alpha = 0.2) # or geom_histogram(binwidth = 1) ???
```

#### Question 8

```{r}
students |>
  mutate(age = as.numeric(Sys.Date() - birth_date) / 365) |>
  summarise(`Median age` = as.integer(median(age)), .by = group) |>
  arrange(group)
```

#### Question 9

```{r}
# id, sex and age of the oldest student per group
students |>
  mutate(age = as.numeric(Sys.Date() - birth_date) / 365) |>
  arrange(desc(age)) |>
  slice(1, .by = group) |>
  select(id, group, sex) |>
  arrange(group) |>
  knitr::kable()
```

## Simple grade analysis

#### Question 10

```{r}

```

The data set contains `{r} ` grades.




